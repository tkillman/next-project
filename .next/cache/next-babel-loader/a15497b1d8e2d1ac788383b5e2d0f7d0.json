{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\next-project\\\\src\\\\pages\\\\_app.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { initializeStore } from \"../stores/rootStore\";\nimport App from 'next/app';\nimport { getSnapshot, onPatch } from 'mobx-state-tree';\nimport makeInspectable from 'mobx-devtools-mst';\n\nvar RootApp = /*#__PURE__*/function (_App) {\n  _inherits(RootApp, _App);\n\n  var _super = _createSuper(RootApp);\n\n  function RootApp(props) {\n    var _this;\n\n    _classCallCheck(this, RootApp);\n\n    _this = _super.call(this, props);\n    _this.store = void 0;\n    _this.store = initializeStore(props.isServer, props.initialState); // mst 디버깅 로그\n\n    if (true) {\n      // 크롬 console 에 해당값의 변화가 있을 때 나타나게 함\n      onPatch(_this.store, function (patch) {}); // 크롬 mobx tools 에 MST 로 상태변화를 볼 수 있게 한다.\n\n      makeInspectable(_this.store);\n    }\n\n    return _this;\n  }\n\n  _createClass(RootApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var jssStyles = document.querySelector('#jss-server-side');\n\n      if (jssStyles && jssStyles.parentNode) {\n        jssStyles.parentNode.removeChild(jssStyles);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          Component = _this$props.Component,\n          pageProps = _this$props.pageProps,\n          apolloClient = _this$props.apolloClient;\n      console.log(this.props);\n      return (// <ApolloProvider client={apolloClient}>\n        //     <Provider store={this.store}>\n        //         <Component {...pageProps} />\n        //     </Provider>\n        // </ApolloProvider>\n        __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 4\n          }\n        }, \"debug\")\n      );\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n        var Component, ctx, pageProps, isServer, store;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                Component = _ref.Component, ctx = _ref.ctx;\n                pageProps = {};\n                isServer = false;\n                store = initializeStore(isServer);\n\n                if (!Component.getInitialProps) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 7;\n                return Component.getInitialProps(ctx);\n\n              case 7:\n                pageProps = _context.sent;\n\n              case 8:\n                return _context.abrupt(\"return\", {\n                  initialState: getSnapshot(store),\n                  isServer: isServer,\n                  pageProps: pageProps\n                });\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return RootApp;\n}(App);\n\nexport default RootApp;","map":{"version":3,"sources":["C:/next-project/src/pages/_app.tsx"],"names":["initializeStore","App","getSnapshot","onPatch","makeInspectable","RootApp","props","store","isServer","initialState","patch","jssStyles","document","querySelector","parentNode","removeChild","Component","pageProps","apolloClient","console","log","ctx","getInitialProps"],"mappings":";;;;;;;;;;;;;;;AAAA,SAASA,eAAT;AACA,OAAOC,GAAP,MAAgC,UAAhC;AAGA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,iBAArC;AACA,OAAOC,eAAP,MAA4B,mBAA5B;;IAeMC,O;;;;;AAgBF,mBAAYC,KAAZ,EAAwB;AAAA;;AAAA;;AACpB,8BAAMA,KAAN;AADoB,UAFhBC,KAEgB;AAEpB,UAAKA,KAAL,GAAaP,eAAe,CAACM,KAAK,CAACE,QAAP,EAAiBF,KAAK,CAACG,YAAvB,CAA5B,CAFoB,CAIpB;;AACN,cAA4C;AAC3C;AACAN,MAAAA,OAAO,CAAC,MAAKI,KAAN,EAAa,UAAAG,KAAK,EAAI,CAAE,CAAxB,CAAP,CAF2C,CAI3C;;AACAN,MAAAA,eAAe,CAAC,MAAKG,KAAN,CAAf;AACA;;AAXyB;AAavB;;;;WAED,6BAA2B;AAC7B,UAAMI,SAAS,GAAGC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAlB;;AAEA,UAAIF,SAAS,IAAIA,SAAS,CAACG,UAA3B,EAAuC;AACtCH,QAAAA,SAAS,CAACG,UAAV,CAAqBC,WAArB,CAAiCJ,SAAjC;AACA;AACD;;;WAEE,kBAAgB;AAAA,wBACmC,KAAKL,KADxC;AAAA,UACJU,SADI,eACJA,SADI;AAAA,UACOC,SADP,eACOA,SADP;AAAA,UACkBC,YADlB,eACkBA,YADlB;AAGlBC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKd,KAAjB;AAEM,aACI;AACA;AACA;AACA;AACA;AACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANK;AAQH;;;;sFAlDD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsCU,gBAAAA,SAAtC,QAAsCA,SAAtC,EAAiDK,GAAjD,QAAiDA,GAAjD;AACQJ,gBAAAA,SADR,GACoB,EADpB;AAEIT,gBAAAA,QAFJ;AAGID,gBAAAA,KAHJ,GAGYP,eAAe,CAACQ,QAAD,CAH3B;;AAAA,qBAKEQ,SAAS,CAACM,eALZ;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAMiBN,SAAS,CAACM,eAAV,CAA0BD,GAA1B,CANjB;;AAAA;AAMDJ,gBAAAA,SANC;;AAAA;AAAA,iDASK;AAAER,kBAAAA,YAAY,EAAEP,WAAW,CAACK,KAAD,CAA3B;AAAoCC,kBAAAA,QAAQ,EAARA,QAApC;AAA8CS,kBAAAA,SAAS,EAATA;AAA9C,iBATL;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;EAFkBhB,G;;AAuDtB,eAAeI,OAAf","sourcesContent":["import { initializeStore, IStore } from '~/src/stores/rootStore';\r\nimport App, { AppContext } from 'next/app';\r\nimport { NextComponentType } from 'next';\r\nimport { Provider } from 'mobx-react';\r\nimport { getSnapshot, onPatch } from 'mobx-state-tree';\r\nimport makeInspectable from 'mobx-devtools-mst';\r\nimport { ApolloProvider } from '@apollo/client';\r\n\r\n//import { ThemeProvider } from '@material-ui/core/styles';\r\n//import theme from '../../envConfig/muiTheme';\r\n\r\ninterface IProps {\r\n\tisServer: boolean;\r\n\tinitialState: IStore;\r\n\tComponent: NextComponentType;\r\n\tpageProps: any;\r\n\trouter: any;\r\n\tapolloClient: any;\r\n}\r\n\r\nclass RootApp extends App<IProps> {\r\n\r\n    public static async getInitialProps({ Component, ctx }: AppContext) {\r\n        let pageProps = {};\r\n\t\tconst isServer = typeof window === 'undefined';\r\n\t\tconst store = initializeStore(isServer);\r\n\r\n\t\tif (Component.getInitialProps) {\r\n\t\t\tpageProps = await Component.getInitialProps(ctx);\r\n\t\t}\r\n\r\n\t\treturn { initialState: getSnapshot(store), isServer, pageProps };\r\n    }\r\n\r\n    private store: IStore;\r\n\r\n    constructor(props: any) {\r\n        super(props);\r\n        this.store = initializeStore(props.isServer, props.initialState);\r\n\r\n        // mst 디버깅 로그\r\n\t\tif (process.env.NODE_ENV === 'development') {\r\n\t\t\t// 크롬 console 에 해당값의 변화가 있을 때 나타나게 함\r\n\t\t\tonPatch(this.store, patch => {});\r\n\r\n\t\t\t// 크롬 mobx tools 에 MST 로 상태변화를 볼 수 있게 한다.\r\n\t\t\tmakeInspectable(this.store);\r\n\t\t}\r\n\r\n    }\r\n\r\n    public componentDidMount() {\r\n\t\tconst jssStyles = document.querySelector('#jss-server-side');\r\n\r\n\t\tif (jssStyles && jssStyles.parentNode) {\r\n\t\t\tjssStyles.parentNode.removeChild(jssStyles);\r\n\t\t}\r\n\t}\r\n\r\n    public render() {\r\n        const { Component, pageProps, apolloClient } = this.props;\r\n\r\n\t\tconsole.log(this.props);\r\n\r\n        return (\r\n            // <ApolloProvider client={apolloClient}>\r\n            //     <Provider store={this.store}>\r\n            //         <Component {...pageProps} />\r\n            //     </Provider>\r\n            // </ApolloProvider>\r\n\t\t\t<div>debug</div>\r\n        )\r\n    }    \r\n}    \r\n\r\nexport default RootApp;"]},"metadata":{},"sourceType":"module"}