{"ast":null,"code":"import { types, applySnapshot } from 'mobx-state-tree';\nimport leftMenuStore from \"./leftMenuStore\";\nimport modalStore from \"../common/modalStore\";\nimport _ from 'lodash';\n\n/**\r\n * UI 모델 - HTML UI 컨트롤의 상태값\r\n */\nconst model = types.model('uiModel', {\n  /** 스토어 아이덴티티 */\n  identifier: types.optional(types.identifier, 'uiModel'),\n\n  /** 레프트 메뉴 리스트 */\n  leftMenuList: types.optional(types.array(leftMenuStore.model), []),\n\n  /** 레프트메뉴 depth 1 selected id  */\n  depth1SelectedId: types.optional(types.string, ''),\n\n  /** 레프트메뉴 depth 2 selected id  */\n  depth2SelectedId: types.optional(types.string, ''),\n\n  /** 레프트메뉴 depth 3 selected id  */\n  depth3SelectedId: types.optional(types.string, ''),\n\n  /** 모달 컨텐츠 */\n  modalModel: types.optional(modalStore.model, modalStore.defaultValue)\n}).actions(self => ({\n  /** 레프트메뉴 데이터 set */\n  setLeftMenu(menuList) {\n    const menuData = _.map(menuList, val => ({\n      id: val.MENU_ID,\n      refId: val.P_MENU_ID,\n      depth: val.LEVEL,\n      title: val.MENU_NAME,\n      icon: val.ICON,\n      linkUrl: val.URL,\n      isActive: false,\n      menuType: val.MENU_TYPE\n    }));\n\n    self.leftMenuList.clear();\n    self.leftMenuList.push(...menuData);\n  },\n\n  /** 레프트메뉴 selected id set */\n  setLeftMenuChangeId(selectedId) {\n    const menu = _.find(self.leftMenuList, {\n      id: selectedId\n    });\n\n    const depth = menu.depth;\n\n    if (depth === 1) {\n      self.depth1SelectedId = selectedId;\n    }\n\n    if (depth === 2) {\n      self.depth2SelectedId = selectedId;\n      self.depth1SelectedId = menu.refId;\n    }\n\n    if (depth === 3) {\n      self.depth3SelectedId = selectedId;\n      self.depth2SelectedId = menu.refId;\n      self.depth1SelectedId = _.find(self.leftMenuList, {\n        id: self.depth2SelectedId\n      }).refId;\n    }\n  },\n\n  setLeftMenuActive(id) {\n    const menu = _.find(self.leftMenuList, {\n      id\n    });\n\n    const depth = menu.depth;\n\n    const prevMenu = _.find(self.leftMenuList, {\n      depth,\n      isActive: true\n    });\n\n    const prevMenuId = prevMenu && prevMenu.id;\n    self.setLeftMenuChangeId(id); // depth2 메뉴 toggle 기능\n\n    if (depth === 2) {\n      menu.isActive = !menu.isActive;\n    }\n\n    if (depth === 3) {\n      // 이전 선택한 depth3 메뉴 active false 로 set\n      if (prevMenuId && prevMenuId !== menu.id) {\n        prevMenu.isActive = false;\n      } // depth3 메뉴 active set\n\n\n      menu.isActive = true;\n      /* depth3 이면 depth2(여러개 선택가능하므로 filter 적용) 도 active 바꿔줘야함 */\n      // 이전에 선택한 depth2 메뉴들(현재 메뉴의 depth2 는 제외) 가져오기\n\n      const prevDepth2Menu = _(self.leftMenuList).filter({\n        depth: 2,\n        isActive: true\n      }).reject({\n        id: menu.refId\n      }).value(); // 현재 dpth3메뉴의 depth2 메뉴\n\n\n      const nowDepth2Menu = _.find(self.leftMenuList, {\n        id: menu.refId\n      }); // 지금 deph3 메뉴의 depth2 메뉴를 제외한  active  depth2 메뉴 모두  active를 false 로 set\n\n\n      if (prevDepth2Menu) {\n        prevDepth2Menu.map(val => val.isActive = false);\n      } // 현재 depth3 메뉴의 depth2 메뉴 active=true 로 set\n\n\n      nowDepth2Menu.isActive = true;\n    }\n  },\n\n  setInit() {\n    applySnapshot(self, defaultValue);\n  }\n\n})).views(self => ({\n  /** 메뉴리스트 가져오기(더미데이터) */\n  getAllLeftMenuList() {\n    return self.leftMenuList;\n  },\n\n  /** navpath 가져오기 */\n  getNavPaths() {\n    // navpath 의 경우는 선택한  depth3 메뉴를 기준으로 데이터를 가져온다.\n    //  사용자가 depth3 메뉴를  클릭해서 활성화 해놓은 상태에서 depth2(폴더)를 클릭할 수도 있으니\n    // depth2SelectedId 값을 가져오면 안된다.\n    if (!self.depth3SelectedId) {\n      return null;\n    }\n\n    const depth3Menu = _.find(self.leftMenuList, {\n      id: self.depth3SelectedId\n    });\n\n    const depth2Menu = _.find(self.leftMenuList, {\n      id: depth3Menu.refId\n    });\n\n    const depth1Menu = _.find(self.leftMenuList, {\n      id: depth2Menu.refId\n    });\n\n    return [depth1Menu.title, depth2Menu.title, depth3Menu.title];\n  },\n\n  /** depth 1 메뉴 리스트 */\n  getDepth1MenuList() {\n    return _.filter(self.leftMenuList, {\n      depth: 1\n    });\n  },\n\n  /** depth 2 메뉴 리스트 */\n  getDepth2MenuList(refId) {\n    return _.filter(self.leftMenuList, {\n      depth: 2,\n      refId\n    });\n  },\n\n  /** depth 3 메뉴 리스트 */\n  getDepth3MenuList(refId) {\n    return _.filter(self.leftMenuList, {\n      depth: 3,\n      refId\n    });\n  },\n\n  /** id를 가지고 메뉴정보 가져오기 */\n  getMenuById(id) {\n    return _.find(self.leftMenuList, {\n      id\n    });\n  },\n\n  /** linkUrl 을 가지고 메뉴정보 가져오기 */\n  getMenuByLinkUrl(linkUrl) {\n    return _.find(self.leftMenuList, {\n      linkUrl\n    });\n  }\n\n}));\n/** 초기화 값 */\n\nconst defaultValue = {\n  identifier: 'uiModel',\n  leftMenuList: [],\n  depth1SelectedId: '',\n  depth2SelectedId: '',\n  depth3SelectedId: '',\n  navPaths: [],\n  modalModel: {\n    isOpen: false,\n    title: '알림',\n    bodyContents: '',\n    firstBtnText: '확인',\n    firstBtnClassName: '',\n    secondBtnText: '',\n    secondBtnClassName: 'd-none',\n    verticalCentered: true\n  }\n};\n/** create or initialize */\n\nconst create = model.create(defaultValue);\nconst uiStore = {\n  create,\n  defaultValue,\n  model\n};\n/** ui모델 타입 */\n\nexport default uiStore;","map":{"version":3,"sources":["C:/next-project/src/stores/ui/uiStore.ts"],"names":["types","applySnapshot","leftMenuStore","modalStore","_","model","identifier","optional","leftMenuList","array","depth1SelectedId","string","depth2SelectedId","depth3SelectedId","modalModel","defaultValue","actions","self","setLeftMenu","menuList","menuData","map","val","id","MENU_ID","refId","P_MENU_ID","depth","LEVEL","title","MENU_NAME","icon","ICON","linkUrl","URL","isActive","menuType","MENU_TYPE","clear","push","setLeftMenuChangeId","selectedId","menu","find","setLeftMenuActive","prevMenu","prevMenuId","prevDepth2Menu","filter","reject","value","nowDepth2Menu","setInit","views","getAllLeftMenuList","getNavPaths","depth3Menu","depth2Menu","depth1Menu","getDepth1MenuList","getDepth2MenuList","getDepth3MenuList","getMenuById","getMenuByLinkUrl","navPaths","isOpen","bodyContents","firstBtnText","firstBtnClassName","secondBtnText","secondBtnClassName","verticalCentered","create","uiStore"],"mappings":"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","sourcesContent":["import { Instance, types, applySnapshot, flow } from 'mobx-state-tree';\r\nimport leftMenuStore from './leftMenuStore';\r\nimport modalStore from '~/stores/common/modalStore';\r\nimport _ from 'lodash';\r\nimport { Entity_Menu_List } from '~/gen/graphql-types';\r\n\r\n/**\r\n * UI 모델 - HTML UI 컨트롤의 상태값\r\n */\r\nconst model = types\r\n\t.model('uiModel', {\r\n\t\t/** 스토어 아이덴티티 */\r\n\t\tidentifier: types.optional(types.identifier, 'uiModel'),\r\n\r\n\t\t/** 레프트 메뉴 리스트 */\r\n\t\tleftMenuList: types.optional(types.array(leftMenuStore.model), []),\r\n\r\n\t\t/** 레프트메뉴 depth 1 selected id  */\r\n\t\tdepth1SelectedId: types.optional(types.string, ''),\r\n\r\n\t\t/** 레프트메뉴 depth 2 selected id  */\r\n\t\tdepth2SelectedId: types.optional(types.string, ''),\r\n\r\n\t\t/** 레프트메뉴 depth 3 selected id  */\r\n\t\tdepth3SelectedId: types.optional(types.string, ''),\r\n\r\n\t\t/** 모달 컨텐츠 */\r\n\t\tmodalModel: types.optional(modalStore.model, modalStore.defaultValue),\r\n\t})\r\n\t.actions(self => ({\r\n\t\t/** 레프트메뉴 데이터 set */\r\n\t\tsetLeftMenu(menuList: Entity_Menu_List[]) {\r\n\t\t\tconst menuData = _.map(menuList, val => ({\r\n\t\t\t\tid: val.MENU_ID,\r\n\t\t\t\trefId: val.P_MENU_ID,\r\n\t\t\t\tdepth: val.LEVEL,\r\n\t\t\t\ttitle: val.MENU_NAME,\r\n\t\t\t\ticon: val.ICON,\r\n\t\t\t\tlinkUrl: val.URL,\r\n\t\t\t\tisActive: false,\r\n\t\t\t\tmenuType: val.MENU_TYPE\r\n\t\t\t}));\r\n\r\n\t\t\tself.leftMenuList.clear();\r\n\t\t\tself.leftMenuList.push(...menuData);\r\n\t\t},\r\n\t\t/** 레프트메뉴 selected id set */\r\n\t\tsetLeftMenuChangeId(selectedId: string) {\r\n\t\t\tconst menu = _.find(self.leftMenuList, { id: selectedId });\r\n\t\t\tconst depth = menu.depth;\r\n\r\n\t\t\tif (depth === 1) {\r\n\t\t\t\tself.depth1SelectedId = selectedId;\r\n\t\t\t}\r\n\r\n\t\t\tif (depth === 2) {\r\n\t\t\t\tself.depth2SelectedId = selectedId;\r\n\t\t\t\tself.depth1SelectedId = menu.refId;\r\n\t\t\t}\r\n\r\n\t\t\tif (depth === 3) {\r\n\t\t\t\tself.depth3SelectedId = selectedId;\r\n\t\t\t\tself.depth2SelectedId = menu.refId;\r\n\t\t\t\tself.depth1SelectedId = _.find(self.leftMenuList, {\r\n\t\t\t\t\tid: self.depth2SelectedId\r\n\t\t\t\t}).refId;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetLeftMenuActive(id: string) {\r\n\t\t\tconst menu = _.find(self.leftMenuList, { id });\r\n\t\t\tconst depth = menu.depth;\r\n\t\t\tconst prevMenu = _.find(self.leftMenuList, { depth, isActive: true });\r\n\t\t\tconst prevMenuId = prevMenu && prevMenu.id;\r\n\r\n\t\t\t(self as IUiModelType).setLeftMenuChangeId(id);\r\n\r\n\t\t\t// depth2 메뉴 toggle 기능\r\n\t\t\tif (depth === 2) {\r\n\t\t\t\tmenu.isActive = !menu.isActive;\r\n\t\t\t}\r\n\r\n\t\t\tif (depth === 3) {\r\n\t\t\t\t// 이전 선택한 depth3 메뉴 active false 로 set\r\n\t\t\t\tif (prevMenuId && prevMenuId !== menu.id) {\r\n\t\t\t\t\tprevMenu.isActive = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// depth3 메뉴 active set\r\n\t\t\t\tmenu.isActive = true;\r\n\r\n\t\t\t\t/* depth3 이면 depth2(여러개 선택가능하므로 filter 적용) 도 active 바꿔줘야함 */\r\n\t\t\t\t// 이전에 선택한 depth2 메뉴들(현재 메뉴의 depth2 는 제외) 가져오기\r\n\t\t\t\tconst prevDepth2Menu = _(self.leftMenuList)\r\n\t\t\t\t\t.filter({ depth: 2, isActive: true })\r\n\t\t\t\t\t.reject({ id: menu.refId })\r\n\t\t\t\t\t.value();\r\n\r\n\t\t\t\t// 현재 dpth3메뉴의 depth2 메뉴\r\n\t\t\t\tconst nowDepth2Menu = _.find(self.leftMenuList, { id: menu.refId });\r\n\r\n\t\t\t\t// 지금 deph3 메뉴의 depth2 메뉴를 제외한  active  depth2 메뉴 모두  active를 false 로 set\r\n\t\t\t\tif (prevDepth2Menu) {\r\n\t\t\t\t\tprevDepth2Menu.map(val => (val.isActive = false));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 현재 depth3 메뉴의 depth2 메뉴 active=true 로 set\r\n\t\t\t\tnowDepth2Menu.isActive = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetInit() {\r\n\t\t\tapplySnapshot(self, defaultValue);\r\n\t\t}\r\n\t}))\r\n\t.views(self => ({\r\n\t\t/** 메뉴리스트 가져오기(더미데이터) */\r\n\t\tgetAllLeftMenuList() {\r\n\t\t\treturn self.leftMenuList;\r\n\t\t},\r\n\t\t/** navpath 가져오기 */\r\n\t\tgetNavPaths() {\r\n\t\t\t// navpath 의 경우는 선택한  depth3 메뉴를 기준으로 데이터를 가져온다.\r\n\t\t\t//  사용자가 depth3 메뉴를  클릭해서 활성화 해놓은 상태에서 depth2(폴더)를 클릭할 수도 있으니\r\n\t\t\t// depth2SelectedId 값을 가져오면 안된다.\r\n\t\t\tif (!self.depth3SelectedId) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tconst depth3Menu = _.find(self.leftMenuList, {\r\n\t\t\t\tid: self.depth3SelectedId\r\n\t\t\t});\r\n\t\t\tconst depth2Menu = _.find(self.leftMenuList, { id: depth3Menu.refId });\r\n\t\t\tconst depth1Menu = _.find(self.leftMenuList, { id: depth2Menu.refId });\r\n\r\n\t\t\treturn [depth1Menu.title, depth2Menu.title, depth3Menu.title];\r\n\t\t},\r\n\t\t/** depth 1 메뉴 리스트 */\r\n\t\tgetDepth1MenuList() {\r\n\t\t\treturn _.filter(self.leftMenuList, { depth: 1 });\r\n\t\t},\r\n\t\t/** depth 2 메뉴 리스트 */\r\n\t\tgetDepth2MenuList(refId: string) {\r\n\t\t\treturn _.filter(self.leftMenuList, { depth: 2, refId });\r\n\t\t},\r\n\t\t/** depth 3 메뉴 리스트 */\r\n\t\tgetDepth3MenuList(refId: string) {\r\n\t\t\treturn _.filter(self.leftMenuList, { depth: 3, refId });\r\n\t\t},\r\n\t\t/** id를 가지고 메뉴정보 가져오기 */\r\n\t\tgetMenuById(id: string) {\r\n\t\t\treturn _.find(self.leftMenuList, { id });\r\n\t\t},\r\n\t\t/** linkUrl 을 가지고 메뉴정보 가져오기 */\r\n\t\tgetMenuByLinkUrl(linkUrl: string) {\r\n\t\t\treturn _.find(self.leftMenuList, { linkUrl });\r\n\t\t}\r\n\t}));\r\n\r\n/** 초기화 값 */\r\nconst defaultValue = {\r\n\tidentifier: 'uiModel',\r\n\tleftMenuList: [],\r\n\tdepth1SelectedId: '',\r\n\tdepth2SelectedId: '',\r\n\tdepth3SelectedId: '',\r\n\tnavPaths: [],\r\n\tmodalModel: {\r\n\t\tisOpen: false,\r\n\t\ttitle: '알림',\r\n\t\tbodyContents: '',\r\n\t\tfirstBtnText: '확인',\r\n\t\tfirstBtnClassName: '',\r\n\t\tsecondBtnText: '',\r\n\t\tsecondBtnClassName: 'd-none',\r\n\t\tverticalCentered: true\r\n\t}\r\n};\r\n\r\n/** create or initialize */\r\nconst create = model.create(defaultValue);\r\n\r\nconst uiStore = {\r\n\tcreate,\r\n\tdefaultValue,\r\n\tmodel\r\n};\r\n\r\n/** ui모델 타입 */\r\nexport type IUiModelType = Instance<typeof model>;\r\n\r\nexport default uiStore;\r\n"]},"metadata":{},"sourceType":"module"}